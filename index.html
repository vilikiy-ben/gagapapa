<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="MobileOptimized" content="176">
  <meta name="HandheldFriendly" content="True">
  <meta name="robots" content="noindex, nofollow">
  <title>SubsViewer</title>
  <!-- Telegram MiniApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –≤ Telegram -->
  <link rel="stylesheet" href="telegram-fix.css">
  <!-- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ -->
  <style>
    /* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Telegram */
    .toggle-container label {
      color: white !important;
    }
    .toggle-container input[type="radio"]:checked + label {
      background-color: #4a90e2 !important;
      color: white !important;
    }
    .calendar-day.selected {
      background-color: #4a90e2 !important;
      color: white !important;
    }
    .tab-btn.active {
      color: #4a90e2 !important;
    }
    .tab-btn.active svg {
      color: #4a90e2 !important;
      opacity: 1 !important;
      position: relative !important;
      z-index: 2 !important;
    }
    .tab-indicator {
      z-index: -1 !important;
    }
    /* –§–∏–∫—Å–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤ —Ç–µ–º—ã */
    .fab-button {
      background-color: #4a90e2 !important;
    }
    .fab-button svg {
      color: white !important;
      fill: white !important;
    }
    .submit-btn {
      background-color: #4a90e2 !important;
      color: white !important;
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div class="loading">
      <div class="loading-spinner"></div>
    </div>

    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="app-container">
      <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
      <div class="app-header">
        <div class="app-title-container">
          <div class="app-logo">üìÖ</div>
          <h1 class="app-title">SubsViewer</h1>
        </div>
        <div class="app-version" style="font-size: 0.8rem; color: #777; margin-left: auto;">v1.0.6</div>
      </div>
      
      <!-- –û–±—â–∞—è —Å—É–º–º–∞ -->
      <div class="totals-banner">
        <div class="totals-item">
          <div class="totals-label">–í –º–µ—Å—è—Ü</div>
          <div class="totals-value" id="monthly-total">$0</div>
        </div>
        <div class="totals-divider"></div>
        <div class="totals-item">
          <div class="totals-label">–í –≥–æ–¥</div>
          <div class="totals-value" id="yearly-total">$0</div>
        </div>
      </div>
      
      <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å —Ç–∞–±–∞–º–∏ -->
      <div class="tab-content" id="tab-content">
        <!-- –¢–∞–± 1: –ì–ª–∞–≤–Ω–∞—è / –û–±–∑–æ—Ä -->
        <div class="tab-pane active" id="tab-overview">
          <!-- –ë–ª–∏–∂–∞–π—à–∏–µ –ø–ª–∞—Ç–µ–∂–∏ -->
          <div class="section">
            <h2 class="section-title">–ë–ª–∏–∂–∞–π—à–∏–µ –ø–ª–∞—Ç–µ–∂–∏</h2>
            <div class="upcoming-payments" id="upcoming-payments">
              <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
              <div class="empty-list-message">–ù–µ—Ç –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π</div>
            </div>
          </div>
          
          <!-- –í—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –≤–∏–¥–µ –∫–∞—Ä—Ç–æ—á–µ–∫ -->
          <div class="section">
            <h2 class="section-title" id="all-subscriptions-title">–í—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏ (0)</h2>
            <div class="subscription-cards" id="subscriptions-list">
              <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
              <div class="empty-list-message" id="empty-subscriptions-message">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫</div>
            </div>
          </div>
        </div>
        
        <!-- –¢–∞–± 2: –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
        <div class="tab-pane" id="tab-calendar">
          <div class="section">
            <div class="calendar-container" id="calendar-container">
              <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –∑–¥–µ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            
            <div class="daily-subscriptions" id="daily-subscriptions">
              <!-- –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
              <div class="empty-list-message">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ</div>
            </div>
          </div>
        </div>
        
        <!-- –¢–∞–± 3: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="tab-pane" id="tab-stats">
          <div class="section">
            <h2 class="section-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π</h2>
            
            <div class="stats-cards">
              <div class="stats-card">
                <div class="stats-title">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</div>
                <div class="stats-chart" id="distribution-chart">
                  <div class="placeholder-chart">
                    <div class="chart-bar" style="height: 40%; background-color: #e74c3c;"></div>
                    <div class="chart-bar" style="height: 70%; background-color: #3498db;"></div>
                    <div class="chart-bar" style="height: 30%; background-color: #2ecc71;"></div>
                    <div class="chart-bar" style="height: 60%; background-color: #f1c40f;"></div>
                    <div class="chart-bar" style="height: 50%; background-color: #9b59b6;"></div>
                  </div>
                </div>
              </div>
              
              <div class="stats-card">
                <div class="stats-title">–¢–∏–ø—ã –ø–ª–∞—Ç–µ–∂–µ–π</div>
                <div class="payment-types">
                  <div class="payment-type-item">
                    <div class="payment-type-label">–ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ</div>
                    <div class="payment-type-value" id="monthly-count">0</div>
                  </div>
                  <div class="payment-type-item">
                    <div class="payment-type-label">–ï–∂–µ–≥–æ–¥–Ω—ã–µ</div>
                    <div class="payment-type-value" id="yearly-count">0</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–ø–ª–∞–≤–∞—é—â–∞—è) -->
      <button class="fab-button" id="add-subscription-btn" style="background-color: #4a90e2 !important;">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="color: white !important; fill: white !important; stroke: none !important;">
          <path d="M12 4C12.5523 4 13 4.44772 13 5V19C13 19.5523 12.5523 20 12 20C11.4477 20 11 19.5523 11 19V5C11 4.44772 11.4477 4 12 4Z" fill="white"/>
          <path d="M4 12C4 11.4477 4.44772 11 5 11H19C19.5523 11 20 11.4477 20 12C20 12.5523 19.5523 13 19 13H5C4.44772 13 4 12.5523 4 12Z" fill="white"/>
        </svg>
      </button>
      
      <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ç–∞–±–∞–º -->
      <div class="tab-nav">
        <button class="tab-btn active" data-tab="tab-overview">
          <span class="tab-indicator" style="position: absolute; width: 38px; height: 38px; background-color: #4a90e2; opacity: 0.3; border-radius: 50%; z-index: 0;"></span>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: relative; z-index: 2; color: #4a90e2;">
            <path d="M5 12.7596C5 11.4019 5 10.723 5.27446 10.1262C5.54892 9.52949 6.06437 9.08769 7.09525 8.20407L8.09525 7.34693C9.95857 5.7498 10.8902 4.95123 12 4.95123C13.1098 4.95123 14.0414 5.7498 15.9047 7.34693L16.9047 8.20407C17.9356 9.08769 18.4511 9.52949 18.7255 10.1262C19 10.723 19 11.4019 19 12.7596V17C19 18.8856 19 19.8284 18.4142 20.4142C17.8284 21 16.8856 21 15 21H9C7.11438 21 6.17157 21 5.58579 20.4142C5 19.8284 5 18.8856 5 17V12.7596Z" stroke="currentColor" stroke-width="1.5"/>
            <path d="M14.5 21V16C14.5 15.4477 14.0523 15 13.5 15H10.5C9.94772 15 9.5 15.4477 9.5 16V21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button class="tab-btn" data-tab="tab-calendar">
          <span class="tab-indicator" style="position: absolute; width: 38px; height: 38px; background-color: #4a90e2; opacity: 0; border-radius: 50%; z-index: 0;"></span>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: relative; z-index: 2;">
            <rect x="3" y="6" width="18" height="15" rx="2" stroke="currentColor" stroke-width="1.5"/>
            <path d="M3 10C3 8.11438 3 7.17157 3.58579 6.58579C4.17157 6 5.11438 6 7 6H17C18.8856 6 19.8284 6 20.4142 6.58579C21 7.17157 21 8.11438 21 10H3Z" fill="currentColor" fill-opacity="0.2"/>
            <path d="M7 3V6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M17 3V6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <rect x="7" y="12" width="2" height="2" rx="0.5" fill="currentColor"/>
            <rect x="11" y="12" width="2" height="2" rx="0.5" fill="currentColor"/>
            <rect x="15" y="12" width="2" height="2" rx="0.5" fill="currentColor"/>
            <rect x="7" y="16" width="2" height="2" rx="0.5" fill="currentColor"/>
            <rect x="11" y="16" width="2" height="2" rx="0.5" fill="currentColor"/>
            <rect x="15" y="16" width="2" height="2" rx="0.5" fill="currentColor"/>
          </svg>
        </button>
        <button class="tab-btn" data-tab="tab-stats">
          <span class="tab-indicator" style="position: absolute; width: 38px; height: 38px; background-color: #4a90e2; opacity: 0; border-radius: 50%; z-index: 0;"></span>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: relative; z-index: 2;">
            <path d="M21 21H4.6C4.03995 21 3.75992 21 3.54601 20.891C3.35785 20.7951 3.20487 20.6422 3.10899 20.454C3 20.2401 3 19.9601 3 19.4V3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M21 7L17.5 10.5L13 6L7 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M17 7H21V11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ (—Å–∫—Ä—ã—Ç–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
      <div class="modal" id="subscription-form-modal">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="form-title" id="form-title">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</h3>
            <button class="close-btn" id="close-form-btn">&times;</button>
          </div>
          <form id="subscription-form">
            <input type="hidden" id="subscription-id" value="">
            <div class="form-group">
              <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
              <input type="text" id="name" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, Netflix" required>
            </div>
            <div class="form-group">
              <label for="price">–¶–µ–Ω–∞, $</label>
              <input type="number" id="price" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, 20" min="0" step="0.01" required>
            </div>
            <div class="form-group toggle-group">
              <label>–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å</label>
              <div class="toggle-container">
                <input type="radio" id="monthly" name="period" value="monthly" checked>
                <label for="monthly" style="color: white !important;">–ï–∂–µ–º–µ—Å—è—á–Ω–æ</label>
                <input type="radio" id="yearly" name="period" value="yearly">
                <label for="yearly" style="color: white !important;">–ï–∂–µ–≥–æ–¥–Ω–æ</label>
              </div>
            </div>
            <div class="form-group">
              <label for="billing-date">–î–∞—Ç–∞ —Å–ø–∏—Å–∞–Ω–∏—è</label>
              <input type="date" id="billing-date" required style="color: white !important;">
            </div>
            <div class="form-group">
              <label for="color">–¶–≤–µ—Ç</label>
              <div class="color-options" id="color-options">
                <div class="color-option" data-color="#e74c3c" style="background-color: #e74c3c;"></div>
                <div class="color-option" data-color="#2ecc71" style="background-color: #2ecc71;"></div>
                <div class="color-option" data-color="#3498db" style="background-color: #3498db;"></div>
                <div class="color-option" data-color="#9b59b6" style="background-color: #9b59b6;"></div>
                <div class="color-option" data-color="#f1c40f" style="background-color: #f1c40f;"></div>
                <div class="color-option" data-color="#e67e22" style="background-color: #e67e22;"></div>
                <div class="color-option" data-color="#1abc9c" style="background-color: #1abc9c;"></div>
                <div class="color-option" data-color="#34495e" style="background-color: #34495e;"></div>
              </div>
              <input type="hidden" id="color" value="#3498db">
            </div>
            <div class="form-actions">
              <button type="button" class="cancel-btn" id="cancel-form-btn">–û—Ç–º–µ–Ω–∞</button>
              <button type="submit" class="submit-btn" id="form-submit-btn" style="background-color: #4a90e2 !important; color: white !important;">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
          </form>
        </div>
      </div>
      
      <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
      <div class="modal" id="confirm-delete-modal">
        <div class="modal-content confirm-modal">
          <div class="confirm-title">–£–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É?</div>
          <div class="confirm-message">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</div>
          <div class="confirm-actions">
            <button class="cancel-btn" id="cancel-delete-btn">–û—Ç–º–µ–Ω–∞</button>
            <button class="danger-btn" id="confirm-delete-btn">–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
  <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∏–ª–µ–π -->
  <script>
    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', function() {
      // –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Telegram
      if (window.Telegram && window.Telegram.WebApp) {
        // –§–æ—Ä—Å–∏—Ä—É–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ–≤ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏ –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
        const fixStyles = function() {
          // –î–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π
          const checkedLabels = document.querySelectorAll('.toggle-container input[type="radio"]:checked + label');
          checkedLabels.forEach(label => {
            label.style.backgroundColor = '#4a90e2'; 
            label.style.color = 'white';
          });
          
          // –î–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
          const selectedDays = document.querySelectorAll('.calendar-day.selected');
          selectedDays.forEach(day => {
            day.style.backgroundColor = '#4a90e2';
            day.style.color = 'white';
          });
          
          // –î–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–æ–∫
          const activeTabs = document.querySelectorAll('.tab-btn.active');
          activeTabs.forEach(tab => {
            tab.style.color = '#4a90e2';
            const svg = tab.querySelector('svg');
            if (svg) svg.style.color = '#4a90e2';
          });
        };
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ä–∞–∑—É –∏ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π (–ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ DOM)
        fixStyles();
        setTimeout(fixStyles, 500);
        
        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∏–ª–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
        const observer = new MutationObserver(fixStyles);
        observer.observe(document.body, { childList: true, subtree: true });
      }
    });
  </script>
</body>
</html> 
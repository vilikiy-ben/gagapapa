# SubsViewer - Трекер подписок для Telegram Mini App

Приложение для отслеживания платных подписок в формате Telegram Mini App.

## Настройка проекта с Supabase

### 1. Настройка Supabase

1. Создайте новый проект в [Supabase](https://supabase.com/)
2. Выполните SQL-скрипт из файла `supabase-setup.sql` в SQL Editor Supabase:
   - Перейдите в раздел SQL Editor
   - Создайте новый запрос
   - Вставьте содержимое файла `supabase-setup.sql`
   - Выполните запрос

### 2. Настройка параметров приложения

1. Откройте файл `supabase.js`
2. Замените URL и ключ Supabase на ваши значения:
   ```javascript
   const SUPABASE_URL = 'https://ваш-проект.supabase.co';
   const SUPABASE_ANON_KEY = 'ваш-анонимный-ключ';
   ```

Эти значения можно найти в панели управления Supabase, в разделе Settings > API.

### 3. Локальная разработка

```bash
# Установка зависимостей
npm install

# Запуск локального сервера разработки
npm start
```

При локальной разработке приложение будет эмулировать Telegram WebApp API и использовать тестового пользователя.

### 4. Миграция данных

При первом запуске приложения с настроенной Supabase, данные из localStorage (если они есть) будут автоматически перенесены в базу данных Supabase.

## Структура проекта

- `app.js` - Основной файл приложения
- `supabase.js` - Конфигурация и функции для работы с Supabase
- `supabase-status.js` - Мониторинг состояния подключения к Supabase
- `index.html` - Основной HTML файл
- `style.css` - Основные стили
- `telegram-fix.css` - Стили для исправления проблем в Telegram

## Deployment

Для деплоя на GitHub Pages используйте:

```bash
npm run deploy
```

## Особенности работы

1. При отсутствии подключения к Supabase, приложение автоматически переключается на работу с localStorage
2. При первом входе пользователя создается запись в таблице пользователей
3. Все пользовательские подписки привязаны к идентификатору Telegram 